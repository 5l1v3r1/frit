#!/usr/bin/python
import sys
import os.path
import configobj
import fritutils.termout
import fritcommands.init

def mainFrit():
    # Check to see if a command was given.
    if len(sys.argv) < 2:
        fritutils.termout.printWarning('No command was given')
        sys.exit(1)
    # check to see if the current working dir is allowed
    fritutils.noBadPath()
    # Separate command and the command arguemnts
    (command,args) = fritutils.getCommand(sys.argv[1:])
    # If the command is init, just do it
    if command == 'init':
        if not fritutils.isCwdFrit():
            fritcommands.init.initCommand()
            sys.exit(0)
    # The command is not init, so we should find a config file
    if os.path.exists('.frit/config'):
        try:
            fritConfig = configobj.ConfigObj('.frit/config')
        except configobj.ConfigObjError:
            fritutils.termout.printWarning('The config file contains errors.')
            sys.exit(1)
    # Here we try to map evidences from config file to Evidence objects

    # Obviously, the given command was not found
    fritutils.termout.printWarning('The "%s" command was not found.' % command)
if __name__ == '__main__':
    mainFrit()
